(function(e){function t(t){for(var n,a,c=t[0],s=t[1],u=t[2],h=0,d=[];h<c.length;h++)a=c[h],i[a]&&d.push(i[a][0]),i[a]=0;for(n in s)Object.prototype.hasOwnProperty.call(s,n)&&(e[n]=s[n]);f&&f(t);while(d.length)d.shift()();return o.push.apply(o,u||[]),r()}function r(){for(var e,t=0;t<o.length;t++){for(var r=o[t],n=!0,c=1;c<r.length;c++){var s=r[c];0!==i[s]&&(n=!1)}n&&(o.splice(t--,1),e=a(a.s=r[0]))}return e}var n={},i={app:0},o=[];function a(t){if(n[t])return n[t].exports;var r=n[t]={i:t,l:!1,exports:{}};return e[t].call(r.exports,r,r.exports,a),r.l=!0,r.exports}a.m=e,a.c=n,a.d=function(e,t,r){a.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:r})},a.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},a.t=function(e,t){if(1&t&&(e=a(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var r=Object.create(null);if(a.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var n in e)a.d(r,n,function(t){return e[t]}.bind(null,n));return r},a.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return a.d(t,"a",t),t},a.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},a.p="/";var c=window["webpackJsonp"]=window["webpackJsonp"]||[],s=c.push.bind(c);c.push=t,c=c.slice();for(var u=0;u<c.length;u++)t(c[u]);var f=s;o.push([0,"chunk-vendors"]),r()})({0:function(e,t,r){e.exports=r("56d7")},"568f":function(e,t,r){"use strict";var n=r("ff7b"),i=r.n(n);i.a},"56d7":function(e,t,r){"use strict";r.r(t);r("cadf"),r("551c"),r("097d");var n=r("2b0e"),i=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{attrs:{id:"app"}},[r("router-view")],1)},o=[],a=r("2877"),c={},s=Object(a["a"])(c,i,o,!1,null,null,null),u=s.exports,f=r("8c4f"),h=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",[r("ScoreBoard")],1)},d=[],p=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"scoreboard"},[r("div",{staticClass:"scores"},[r("div",{staticClass:"score",class:e.newScoreClass},[e._v("Score "+e._s(e.score))]),e.newHighScore()?r("div",[r("div",{staticClass:"score score-hero"},[e._v("New High Score!!!")])]):e._e(),r("div",{staticClass:"score"},[e._v("High Score "+e._s(e.highScore))])])])},l=[],g=r("2f62");n["a"].use(g["a"]);var v=new g["a"].Store({getters:{score:function(e){return e.score},highScore:function(e){return e.highScore},prevMove:function(e){return e.prevMove},ctx:function(e){return e.ctx},skier:function(e){return e.skier},game:function(e){return e.game},obstacles:function(e){return e.obstacles},loadedAssets:function(e){return e.loadedAssets}},state:{score:0,highScore:0,prevMove:0,ctx:0,skier:{direction:5,mapX:0,mapY:0,speed:8},game:{width:0,height:0},obstacles:[],obstacleTypes:["tree","treeCluster","rock1","rock2"],loadedAssets:{}},mutations:{tick:function(e,t){e.score=t},skierDirection:function(e,t){e.skier.direction=t},skierMapX:function(e,t){e.skier.mapX=t},skierMapY:function(e,t){e.skier.mapY=t},skierSpeed:function(e,t){e.skier.speed=t},gameWidth:function(e,t){e.game.width=t},gameHeight:function(e,t){e.game.height=t},ctx:function(e,t){e.ctx=t},pushObstalce:function(e,t){e.obstacles.push(t)},newObstacles:function(e,t){e.obstacles=t},loadedAssets:function(e,t){var r=t[0],n=t[1];e.loadedAssets[r]=n},setScore:function(e,t){e.score=t},setHighScore:function(e,t){e.highScore=t},prevMove:function(e,t){e.prevMove=t}},actions:{tick:function(e,t){var r=e.commit;r("tick",t)},ctx:function(e,t){var r=e.commit;r("ctx",t)},skierDirection:function(e,t){var r=e.commit;r("skierDirection",t)},skierMapX:function(e,t){var r=e.commit;r("skierMapX",t)},skierMapY:function(e,t){var r=e.commit;r("skierMapY",t)},skierSpeed:function(e,t){var r=e.commit;r("skierSpeed",t)},gameWidth:function(e,t){var r=e.commit;r("gameWidth",t)},gameHeight:function(e,t){var r=e.commit;r("gameHeight",t)},pushObstalce:function(e,t){var r=e.commit;r("pushObstalce",t)},newObstacles:function(e,t){var r=e.commit;r("newObstacles",t)},loadedAssets:function(e,t){var r=e.commit;r("loadedAssets",t)},setPrevMove:function(e){var t=e.commit,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:5;t("prevMove",r)},setScore:function(e,t){var r=e.commit;r("setScore",t)},setHighScore:function(e,t){var r=e.commit;r("setHighScore",t)}}}),m=function(){return v.getters["skier"]},k=function(){return m().mapX},w=function(){return m().mapY},b=function(){return v.getters["obstacles"]},S=function(){return v.getters["loadedAssets"]},y=function(){return v.getters["game"]},x=function(){return y().width},_=function(){return y().height},M=function(){return v.getters["ctx"]},O=function(){return v.getters["score"]},D=function(e){v.dispatch("setScore",e)},C=function(){return v.getters["highScore"]},X=function(e){v.dispatch("setHighScore",e)},Y={data:function(){return{newScoreClass:"new-high-score"}},methods:{newHighScore:function(){if(this.score>0){if(this.score>this.highScore)return this.newScoreClass="new-high-score",!0}else this.newScoreClass=""}},computed:{score:function(){return O()},highScore:function(){return C()}}},H=Y,A=(r("e388"),Object(a["a"])(H,p,l,!1,null,"d9ff6046",null)),P=A.exports,j=function(e){e.scale(window.devicePixelRatio,window.devicePixelRatio)},R=function(){var e=M();e.clearRect(0,0,x(),_())},T=r("2ef0"),W=r.n(T),I=(r("7514"),function e(t,r,n,i){var o=b(),a=W.a.random(t,r),c=W.a.random(n,i),s=W.a.find(o,function(e){return a>e.x-50&&a<e.x+50&&c>e.y-50&&c<e.y+50});return s?e(t,r,n,i):{x:a,y:c}}),L={assetPath:"/assets/",assets:{skierCrash:"skier_crash.png",skierLeft:"skier_left.png",skierLeftDown:"skier_left_down.png",skierDown:"skier_down.png",skierRightDown:"skier_right_down.png",skierRight:"skier_right.png",tree:"tree_1.png",treeCluster:"tree_cluster.png",rock1:"rock_1.png",rock2:"rock_2.png"},obstacleTypes:["tree","treeCluster","rock1","rock2"]},$=function(e,t,r,n){var i=L.obstacleTypes,o=W.a.random(0,i.length-1),a=I(e,t,r,n),c={type:i[o],x:a.x,y:a.y};v.dispatch("pushObstalce",c)},B=function(e){var t=W.a.random(1,8);if(8===t){var r=k(),n=k()+v.getters["game"].width,i=w(),o=w()+v.getters["game"].height;switch(e){case 1:$(r-50,r,i,o);break;case 2:$(r-50,r,i,o),$(r,n,o,o+50);break;case 3:$(r,n,o,o+50);break;case 4:$(n,n+50,i,o),$(r,n,o,o+50);break;case 5:$(n,n+50,i,o);break;case 6:$(r,n,i-50,i);break}}},E=function(){var e=m(),t=e.direction,r=e.mapX,n=e.mapY,i=e.speed;switch(t){case 2:r-=Math.round(i/1.4142),v.dispatch("skierMapX",r),n+=Math.round(i/1.4142),v.dispatch("skierMapY",n),B(t);break;case 3:n+=i,v.dispatch("skierMapY",n),B(t);break;case 4:r+=i/1.4142,v.dispatch("skierMapX",r),n+=i/1.4142,v.dispatch("skierMapY",n),B(t);break}},q=function(){var e=m(),t=e.direction;return t>1&&t<5&&t},F=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:10,t=O(),r=t+e;D(r)},J=function(){q()&&F()},N=function(){var e=C(),t=O();return t>e&&X(t),t},z=function(){N(),G()},G=function(){var e=m(),t=e.direction;0===t&&D(0)},K=function(){var e,t=m(),r=t.direction;switch(r){case 0:e="skierCrash";break;case 1:e="skierLeft";break;case 2:e="skierLeftDown";break;case 3:e="skierDown";break;case 4:e="skierRightDown";break;case 5:e="skierRight";break}return e},Q=function(e){if(void 0===e){var t=27,r=23,n="/assets/skier_left.png",i=new Image(t,r);i.src=n,e=i}return e},U=function(e,t){return!(t.left>e.right||t.right<e.left||t.top>e.bottom||t.bottom<e.top)},V=function(){var e=m(),t=e.mapX,r=e.mapY,n=v.getters["game"].width,i=v.getters["game"].height,o=v.getters["loadedAssets"],a=K(),c=o[a];c=Q(c);var s,u={left:t+n/2,right:t+c.width+n/2,top:r+c.height-5+i/2,bottom:r+c.height+i/2},f=b(),h=W.a.find(f,function(e){var t=o[e.type];return s={left:e.x,right:e.x+t.width,top:e.y+t.height-5,bottom:e.y+t.height},U(u,s)});h&&(z(),v.dispatch("skierDirection",0))},Z=function(){var e=M(),t=x(),r=_(),n=S(),i=K(),o=n[i];o=Q(o);var a=(t-o.width)/2,c=(r-o.height)/2;e.drawImage(o,a,c,o.width,o.height)},ee=function(){var e=m(),t=M(),r=e.mapX,n=e.mapY,i=x(),o=_(),a=[],c=b(),s=S();W.a.each(c,function(e){var c=s[e.type],u=e.x-r-c.width/2,f=e.y-n-c.height/2;u<-100||u>i+50||f<-100||f>o+50||(t.drawImage(c,u,f,c.width,c.height),a.push(e))}),v.dispatch("newObstacles",a)},te=function(){var e=M();e.save(),j(e),R(),E(),J(),V(),Z(),ee(),e.restore()},re={render:te},ne=function e(){re.render(),requestAnimationFrame(e)},ie=r("1157"),oe=r.n(ie),ae=function(){oe()(window).keydown(function(e){var t=m(),r=t.direction,n=t.mapX,i=t.mapY,o=t.speed;switch(e.which){case 37:1===r?(n-=o,v.dispatch("skierMapX",n),B(r)):(r-=1,v.dispatch("skierDirection",r)),e.preventDefault();break;case 39:5===r?(n+=o,v.dispatch("skierMapX",n),B(r)):(r+=1,v.dispatch("skierDirection",r)),e.preventDefault();break;case 38:1!==r&&5!==r||(i-=o,v.dispatch("skierMapY",i),B(6)),e.preventDefault();break;case 40:v.dispatch("skierDirection",3),e.preventDefault();break}})},ce=function(){for(var e=Math.ceil(W.a.random(5,7)*(x()/800)*(_()/500)),t=-50,r=x()+50,n=_()/2-1e3,i=_()+50,o=0;o<e;o++)$(t,r,n,i);var a=b(),c=S(),s=W.a.sortBy(a,function(e){var t=c[e.type];return e.y+t.height});v.dispatch("newObstacles",s)},se=function(){var e=[];return W.a.each(L.assets,function(t,r){var n=new Image,i=new oe.a.Deferred;n.onload=function(){n.width/=2,n.height/=2,v.dispatch("loadedAssets",[r,n]),i.resolve()},n.src=L.assetPath+t,e.push(i.promise())}),oe.a.when.apply(oe.a,e)},ue=function(){return window.innerHeight},fe=function(){return window.devicePixelRatio},he=function(){return window.innerWidth},de=function(){var e=he();v.dispatch("gameWidth",he());var t=ue();v.dispatch("gameHeight",ue());var r=oe()("<canvas></canvas>").attr("width",e*fe()).attr("height",t*fe()).css({width:e+"px",height:t+"px"});oe()("#game").append(r);var n=r[0].getContext("2d");v.dispatch("ctx",n)},pe=function(e){requestAnimationFrame(e)},le=function(){ae(),se().then(function(){ce()}),de(),pe(ne)},ge={boot:le},ve={components:{ScoreBoard:P},data:function(){return{game:ge}},methods:{},created:function(){this.game.boot()}},me=ve,ke=(r("568f"),Object(a["a"])(me,h,d,!1,null,null,null)),we=ke.exports;n["a"].use(f["a"]);var be=new f["a"]({mode:"history",base:"/",routes:[{path:"/",name:"game",component:we}]});n["a"].config.productionTip=!1,new n["a"]({router:be,store:v,render:function(e){return e(u)}}).$mount("#app")},"7b7f":function(e,t,r){},e388:function(e,t,r){"use strict";var n=r("7b7f"),i=r.n(n);i.a},ff7b:function(e,t,r){}});
//# sourceMappingURL=app.d9fb5f35.js.map